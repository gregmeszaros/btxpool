<?php

$callback = $_GET['callback'] ?? FALSE;

// Are we dealing with jsonp requests (example highcharts)
if (!empty($callback)) {

  // Data
  $data = "Time,Worker1,Worker2,Total
3/9/13 00:00:00,5691,4346,15000
3/9/13 01:00:00,5403,4112,14000
3/9/13 02:00:00,15574,11356,22000
3/9/13 03:00:00,15574,11356,22000
3/9/13 04:00:00,15574,11356,22000
3/9/13 05:00:00,15574,11356,22000
3/9/13 06:00:00,15574,11356,22000
3/9/13 07:00:00,15574,11356,22000
3/9/13 08:00:00,15574,11356,22000
3/9/13 09:00:00,15574,11356,22000
3/9/13 10:00:00,15574,11356,22000
3/9/13 11:00:00,15574,11356,22000
3/9/13 12:00:00,15574,11356,22000
3/9/13 13:00:00,15574,11356,22000
3/9/13 14:00:00,15574,11356,22000
3/9/13 15:00:00,15574,11356,22000
3/9/13 16:00:00,15574,11356,22000
3/9/13 17:00:00,15574,11356,22000
3/9/13 18:00:00,15574,11356,22000
3/9/13 19:00:00,15574,11356,22000
3/9/13 20:00:00,15574,11356,22000
3/9/13 21:00:00,15574,11356,22000
3/9/13 22:00:00,15574,11356,22000
3/9/13 23:00:00,15574,11356,22000
3/9/13 24:00:00,15574,11356,22000";


  /**
   *
   * SELECT
  CONCAT(HOUR(FROM_UNIXTIME(time)), ':00') AS hourly_time,
  AVG(hashrate) AS pool_hashrate,
  COUNT(*) AS number_of_submissions
  FROM hashstats
  WHERE time > (UNIX_TIMESTAMP(NOW()) - (24 * 60 * 60))
  GROUP BY hourly_time;
   */

  print $_GET['callback'] . '(' . json_encode($data, JSON_UNESCAPED_SLASHES) . ')';

}

// Json API requests
else {
  // Header
  $data[] = ['Time', 'Worker 1', 'Worker 2'];
  $data[] = ['01/01/2017', '5', '11'];
  $data[] = ['01/02/2017', '6', '8'];

  print json_encode($data);
}



